<html>

<head>
    <script src="/src/javascript/ImportSmartContract.js"></script>
    <script src="/src/javascript/jquery.min.js"></script>
    <script src="/src/javascript/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/src/css/bootstrap.min.css">
</head>

<body>
    <h1>Hello World!!!</h1>
    <p>Maybe that writing was too big. No matter, view source on this file to see some of the commands you can run in the
        Browser Console to interact with the Truffle Tutorial Smart contract(s)</p>
    <div class="input-group input-group-lg">
        <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroup-sizing-lg">Input String</span>
        </div>
        <input id="NewStringForBlockchain" type="text" class="form-control" aria-label="Large" aria-describedby="inputGroup-sizing-sm">
        <button class="btn btn-outline-secondary" type="button" onclick="UpdateBlockchianWithUpdatedNumber()">Update</button>
    </div>
    <div class="input-group input-group-lg">
        <div class="input-group-prepend">
            <span class="input-group-text">Address and String</span>
        </div>
        <input type="text" aria-label="First name" class="form-control">
        <input type="text" aria-label="Last name" class="form-control">
        <button class="btn btn-outline-secondary" type="button" onclick="UpdateBlockchianWithUpdatedNumber()">SEND</button>
    </div>
    <script>
        window.onload = function () {
            GetSmartContract("/abi/dynamic_set_string.json", "dynamic_set_string");
            CheckBlockchainForUpdatedString()
        }

        function CheckBlockchainForUpdatedString() {
            SmartContracts["dynamic_set_string"].call.public_int(function (err, result) {
                console.log(result.c[0]);
                document.getElementById("NumberFromBlockchain").innerHTML = ("The number of blockchain is " +
                    result.c[0]);
            });
        }

        function UpdateBlockchianWithUpdatedNumber() {
            var tmpNum = parseInt($('#NewNumberForBlockchain').val());
            console.log("tmpNum = " + tmpNum);
            SmartContracts["dynamic_set_string"].call.set_int_data(tmpNum, function () {
                console.log("IT SHOULD WORK")
            });
            CheckBlockchainForUpdatedString();
            $('#NewNumberForBlockchain').val(0);
        }

        window.setInterval(function () {
            console.log("LOOP");
            CheckBlockchainForUpdatedString();
        }, 1000);
    </script>
</body>

</html>